DROP TABLE IF EXISTS ROOM;
DROP TABLE IF EXISTS HOTEL;

CREATE TABLE IF NOT EXISTS HOTEL(
	ID SERIAL PRIMARY KEY,
	NAME VARCHAR(100) NOT NULL,
	STARS INTEGER NOT NULL,
	ADDRESS VARCHAR (200) NOT NULL,
	CONSTRAINT "Stars must be between one and five" CHECK(STARS >= 1 AND STARS <= 5)
);

CREATE TABLE IF NOT EXISTS ROOM(
	ID SERIAL PRIMARY KEY,
	NUMBER INTEGER NOT NULL,
	CAPACITY INTEGER NOT NULL,
	DESCRIPTION TEXT,
	HOTEL INTEGER NOT NULL,
	FOREIGN KEY(HOTEL) REFERENCES HOTEL(ID) ON DELETE CASCADE ON UPDATE CASCADE,
	CONSTRAINT "Repeated number in hotel" UNIQUE (NUMBER,HOTEL),
	CONSTRAINT "Number must be over zero" CHECK(NUMBER >= 1),
	CONSTRAINT "Capacity must be over zero" CHECK(CAPACITY >= 1)
);